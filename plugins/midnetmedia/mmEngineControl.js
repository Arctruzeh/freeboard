(function () {

    //Definition

    freeboard.loadWidgetPlugin({

        type_name: "mmEngineControl",

        display_name: "MM Engine Control",

        description: "Consolidated Engine Controls",

        fill_size: true,

        settings: [
            {
                name: "ec_engine_status",
                display_name: "Engine Current Status",
                type: "calculated"
            },
            {
                name: "ec_engine_send",
                display_name: "Engine Change Status",
                type: "calculated"
            },
            {
                name: "ec_idle_status",
                display_name: "Idle Current Status",
                type: "calculated"
            },
            {
                name: "ec_idle_send",
                display_name: "Idle Change Status",
                type: "calculated"
            },
            {
                name: "ec_clutch_status",
                display_name: "Clutch Current Status",
                type: "calculated"
            },
            {
                name: "ec_clutch_send",
                display_name: "Clutch Change Status",
                type: "calculated"
            },
            {
                name: "ec_light_status",
                display_name: "Light Current Status",
                type: "calculated"
            },
            {
                name: "ec_light_send",
                display_name: "Light Change Status",
                type: "calculated"
            },
            {
                name: "ec_goal_throttle",
                display_name: "Goal Throttle",
                type: "calculated"
            },
            {
                name: "ec_bump_rate_small",
                display_name: "Bump Rate Small",
                type: "calculated"
            },
            {
                name: "ec_speed_control_minor",
                display_name: "Speed Control Minor",
                type: "calculated"
            },
            {
                name: "ec_bump_rate_large",
                display_name: "Bump Rate Large",
                type: "calculated"
            },
            {
                name: "ec_speed_control",
                display_name: "Speed Control",
                type: "calculated"
            },
        ],

        newInstance: function (settings, newInstanceCallback) {

            newInstanceCallback(new mmEngineControl(settings))

        }

    })

    //Implementation

    var mmEngineControlId = 0

    var mmEngineControl = function (settings) {

        var thisWidgetId = "mmEngineControl-" + mmEngineControlId++

        var self = this

        var currentSettings = settings

        var ec = $('<div class="ec-"></div>')
        var ecContainer = $('<div class="ec-container" id="' + thisWidgetId + '"></div>')
        var ecButtons = $('<div class="ec-buttons"></div>')
        var ecArrows = $('<div class="ec-arrows"></div>')

        var ecEngine = $('<div class="ec-big-button"></div>')
        var ecEngineButton = $('<div class="ec-big-button"></div>')
        var ecEngineButtonMid = $('<div class="ec-big-button-2"></div>')
        var ecEngineButtonInner = $('<div class="ec-big-button-inner"></div>')
        var ecEngineButtonInnerBg = $('<div class="ec-big-button-inner-bg"></div>')
        var ecEngineTitle = $('<div class="ec-24">ENGINE</div>')
        var ecEngineSvg = $('<svg class="ec-svg" width="56px" height="40px" viewBox="0 0 56 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-25.000000, -40.000000)" fill="#000000"><g id="motor" transform="translate(25.000000, 40.000000)"><path d="M30.7101622,0.316756757 C30.5091892,0.115675676 30.2302703,0 29.9459459,0 C29.6604324,0 29.3827027,0.115675676 29.1816216,0.316756757 C28.9805405,0.517837838 28.8648649,0.796756757 28.8648649,1.08108108 C28.8648649,1.36540541 28.9804324,1.64432432 29.1816216,1.84540541 C29.3828108,2.04648649 29.6616216,2.16216216 29.9459459,2.16216216 C30.2302703,2.16216216 30.5091892,2.04648649 30.7101622,1.84540541 C30.9113514,1.64432432 31.027027,1.36540541 31.027027,1.08108108 C31.027027,0.796756757 30.9113514,0.517837838 30.7101622,0.316756757 Z" id="Path"></path><path d="M54.2702703,16.6623784 C53.6732973,16.6623784 53.1891892,17.1463784 53.1891892,17.7434595 L53.1891892,24.2162162 L49.5135135,24.2162162 L49.5135135,15.0256216 C49.5135135,14.7389189 49.3995676,14.4638919 49.1968649,14.2611892 L45.847027,10.9112432 C45.6442162,10.7085405 45.3692973,10.5945946 45.0825946,10.5945946 L35.2432432,10.5945946 L35.2432432,7.35135135 L41.1891892,7.35135135 C43.216,7.35135135 44.8648649,5.70248649 44.8648649,3.67567568 C44.8648649,1.64886486 43.216,0 41.1891892,0 L35.1351351,0 C34.5381622,0 34.0540541,0.484 34.0540541,1.08108108 C34.0540541,1.67816216 34.5381622,2.16216216 35.1351351,2.16216216 L41.1891892,2.16216216 C42.0237838,2.16216216 42.7027027,2.84108108 42.7027027,3.67567568 C42.7027027,4.51027027 42.0237838,5.18918919 41.1891892,5.18918919 L34.1621622,5.18918919 L25.5135135,5.18918919 L18.4864865,5.18918919 C17.6518919,5.18918919 16.972973,4.51027027 16.972973,3.67567568 C16.972973,2.84108108 17.6518919,2.16216216 18.4864865,2.16216216 L25.027027,2.16216216 C25.624,2.16216216 26.1081081,1.67816216 26.1081081,1.08108108 C26.1081081,0.484 25.624,0 25.027027,0 L18.4864865,0 C16.4596757,0 14.8108108,1.64886486 14.8108108,3.67567568 C14.8108108,5.70248649 16.4596757,7.35135135 18.4864865,7.35135135 L24.4324324,7.35135135 L24.4324324,10.5945946 L19.5315676,10.5945946 C19.2448649,10.5945946 18.9699459,10.7085405 18.7671351,10.9112432 L15.5883243,14.0901622 L11.2432432,14.0901622 C10.6462703,14.0901622 10.1621622,14.5741622 10.1621622,15.1712432 L10.1621622,19.8918919 L8,19.8918919 C7.40302703,19.8918919 6.91891892,20.3758919 6.91891892,20.972973 L6.91891892,24.2162162 L5.62162162,24.2162162 L5.62162162,16.4900541 C5.62162162,14.9402162 4.36075676,13.6792432 2.81081081,13.6792432 C1.26086486,13.6792432 0,14.9402162 0,16.4900541 L0,34.2335135 C0,35.7833514 1.26086486,37.0443243 2.81081081,37.0443243 C4.36075676,37.0443243 5.62162162,35.7833514 5.62162162,34.2335135 L5.62162162,26.3783784 L6.91891892,26.3783784 L6.91891892,29.6216216 C6.91891892,30.2187027 7.40302703,30.7027027 8,30.7027027 L10.1621622,30.7027027 L10.1621622,33.0582703 C10.1621622,33.344973 10.2761081,33.62 10.4788108,33.8227027 L16.3395676,39.6833514 C16.5423784,39.8860541 16.8172973,40 17.104,40 L38.3243243,40 C38.611027,40 38.8859459,39.8860541 39.0887568,39.6833514 L41.0964324,37.6756757 L48.4324324,37.6756757 C49.0294054,37.6756757 49.5135135,37.1916757 49.5135135,36.5945946 L49.5135135,26.3783784 L53.1891892,26.3783784 L53.1891892,32.8785946 C53.1891892,33.4756757 53.6732973,33.9596757 54.2702703,33.9596757 C54.8672432,33.9596757 55.3513514,33.4756757 55.3513514,32.8785946 L55.3513514,17.7434595 C55.3513514,17.1463784 54.8672432,16.6623784 54.2702703,16.6623784 Z M3.45945946,25.2701622 C3.45924324,25.2792432 3.45924324,25.3153514 3.45945946,25.3245405 L3.45945946,34.2335135 C3.45945946,34.5911351 3.16854054,34.8821622 2.81081081,34.8821622 C2.45308108,34.8821622 2.16216216,34.5912432 2.16216216,34.2335135 L2.16216216,16.4900541 C2.16216216,16.1323243 2.45308108,15.8414054 2.81081081,15.8414054 C3.16854054,15.8414054 3.45945946,16.1323243 3.45945946,16.4900541 L3.45945946,25.2701622 Z M10.1621622,28.5405405 L9.08108108,28.5405405 L9.08108108,22.0540541 L10.1621622,22.0540541 L10.1621622,28.5405405 Z M26.5945946,7.35135135 L33.0810811,7.35135135 L33.0810811,10.5945946 L26.5945946,10.5945946 L26.5945946,7.35135135 Z M47.3513514,35.5135135 L40.6486486,35.5135135 C40.3619459,35.5135135 40.087027,35.6274595 39.8842162,35.8301622 L37.8764324,37.8378378 L17.5517838,37.8378378 L12.3243243,32.6103784 L12.3243243,16.2522162 L16.036,16.2522162 C16.3227027,16.2522162 16.5976216,16.1382703 16.8004324,15.9355676 L19.9794595,12.7567568 L44.6348108,12.7567568 L47.3513514,15.4734054 L47.3513514,35.5135135 Z" id="Shape" fill-rule="nonzero"></path><path d="M36.2236757,33.3978378 C36.0227027,33.1967568 35.7437838,33.0810811 35.4594595,33.0810811 C35.1751351,33.0810811 34.8962162,33.1967568 34.6951351,33.3978378 C34.4940541,33.5989189 34.3783784,33.8778378 34.3783784,34.1621622 C34.3783784,34.4464865 34.4939459,34.7254054 34.6951351,34.9264865 C34.8963243,35.1275676 35.1751351,35.2432432 35.4594595,35.2432432 C35.7437838,35.2432432 36.0227027,35.1275676 36.2236757,34.9264865 C36.4247568,34.7254054 36.5405405,34.4464865 36.5405405,34.1621622 C36.5405405,33.8778378 36.4248649,33.5989189 36.2236757,33.3978378 Z" id="Path"></path><path d="M31.063027,33.0810811 L21.0747027,33.0810811 L16.5035676,28.5099459 C16.0812973,28.0877838 15.396973,28.0877838 14.9745946,28.5099459 C14.5524324,28.9321081 14.5524324,29.6166486 14.9745946,30.0388108 L19.8623784,34.9264865 C20.0651892,35.1291892 20.3401081,35.2431351 20.6268108,35.2431351 L31.0629189,35.2431351 C31.6598919,35.2431351 32.144,34.7591351 32.144,34.1620541 C32.144,33.564973 31.66,33.0810811 31.063027,33.0810811 Z" id="Path"></path></g></g></g></svg>')
        var ecEngineStatus = $('<div class="ec-20">-</div>')

        var ecIdle = $('<div class="ec-big-button"></div>')
        var ecIdleButton = $('<div class="ec-big-button"></div>')
        var ecIdleButtonMid = $('<div class="ec-big-button-2"></div>')
        var ecIdleButtonInner = $('<div class="ec-big-button-inner"></div>')
        var ecIdleButtonInnerBg = $('<div class="ec-big-button-inner-bg"></div>')
        var ecIdleTitle = $('<div class="ec-24">IDLE</div>')
        var ecIdleSvg = $('<div></div>')
        var ecIdleSvgIdle = $('<svg class="ec-svg" width="39px" height="39px" viewBox="0 0 39 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-146.000000, -41.000000)" fill="#000000"><g id="idle" transform="translate(146.000000, 41.000000)"><path d="M19.5,36.5644898 L19.5,36.5644898 C28.9236735,36.5644898 36.5644898,28.9236735 36.5644898,19.5 C36.5644898,10.0763265 28.9236735,2.4355102 19.5,2.4355102 C10.0763265,2.4355102 2.4394898,10.0763265 2.4394898,19.5 C2.4394898,28.9236735 10.0763265,36.5644898 19.5,36.5644898 L19.5,36.5644898 Z M19.5,39 L19.5,39 C8.73122449,39 0,30.2687755 0,19.5 C0,8.73122449 8.73122449,0 19.5,0 C30.2687755,0 39,8.73122449 39,19.5 C39,30.2687755 30.2687755,39 19.5,39 L19.5,39 Z" id="Shape" fill-rule="nonzero"></path><path d="M20.6421429,10.354898 C20.6421429,9.69826531 20.0969388,9.14112245 19.4243878,9.14112245 C18.7478571,9.14112245 18.2066327,9.68234694 18.2066327,10.354898 L18.2066327,20.1168367 C18.2066327,20.4471429 18.3419388,20.7495918 18.5608163,20.9684694 C18.7836735,21.1953061 19.0861224,21.3306122 19.4204082,21.3306122 L26.7388776,21.3306122 C27.4034694,21.3306122 27.9526531,20.7854082 27.9526531,20.1128571 C27.9526531,19.4363265 27.407449,18.895102 26.7388776,18.895102 L20.6421429,18.895102 L20.6421429,10.354898 Z" id="Path"></path></g></g></g></svg>')
        var ecIdleSvgResume = $('<svg width="39px" height="39px" viewBox="0 0 39 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Engine-Control-2-buttons" transform="translate(-146.000000, -41.000000)"><g id="resume" transform="translate(146.000000, 41.000000)"><path d="M19.5,36.5644898 L19.5,36.5644898 C28.9236735,36.5644898 36.5644898,28.9236735 36.5644898,19.5 C36.5644898,10.0763265 28.9236735,2.4355102 19.5,2.4355102 C10.0763265,2.4355102 2.4394898,10.0763265 2.4394898,19.5 C2.4394898,28.9236735 10.0763265,36.5644898 19.5,36.5644898 L19.5,36.5644898 Z M19.5,39 L19.5,39 C8.73122449,39 0,30.2687755 0,19.5 C0,8.73122449 8.73122449,0 19.5,0 C30.2687755,0 39,8.73122449 39,19.5 C39,30.2687755 30.2687755,39 19.5,39 L19.5,39 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path><path d="M23,15.5620499 L15.1350416,25 L30.8649584,25 L23,15.5620499 Z" id="Triangle" stroke="#000000" stroke-width="2" transform="translate(23.000000, 20.000000) rotate(90.000000) translate(-23.000000, -20.000000) "></path></g></g></g></svg>')
        var ecIdleStatus = $('<div class="ec-20">-</div>')

        var ecClutch = $('<div class="ec-big-button"></div>')
        var ecClutchButton = $('<div class="ec-big-button"></div>')
        var ecClutchButtonMid = $('<div class="ec-big-button-2"></div>')
        var ecClutchButtonInner = $('<div class="ec-big-button-inner"></div>')
        var ecClutchButtonInnerBg = $('<div class="ec-big-button-inner-bg"></div>')
        var ecClutchTitle = $('<div class="ec-24">CLUTCH</div>')
        var ecClutchSvg = $('<svg class="ec-svg" width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-35.000000, -160.000000)" fill="#000000"><g id="clutch" transform="translate(35.000000, 160.000000)"><path d="M19.9548718,0 C8.92717949,0 0,8.92717949 0,19.9548718 C0,30.9825641 8.97969231,39.9097436 19.9548718,39.9097436 C30.9825641,39.9097436 39.9097436,30.9825641 39.9097436,19.9548718 C39.9097436,8.92717949 30.9300513,0 19.9548718,0 Z M38.7127179,22.3737436 L35.2886154,21.3202051 C35.1835897,21.2676923 35.0260513,21.3202051 34.9735385,21.4777436 C34.9210256,21.5827692 34.9735385,21.7403077 35.1310769,21.7928205 L38.644,22.8737436 C38.1654359,26.0275897 36.9089231,28.9237949 35.0764103,31.3617436 L30.6988718,26.6268718 C31.7286154,24.9524103 32.3781538,23.0222564 32.5254359,20.9587692 L33.7133333,21.3203077 L33.7658462,21.3203077 C33.8708718,21.3203077 33.9758974,21.2677949 34.0284103,21.1627692 C34.0809231,21.0577436 34.0284103,20.9002051 33.8708718,20.8476923 L32.6630769,20.4801026 C32.6293333,20.4632821 32.5901538,20.4584615 32.5508718,20.4631795 C32.5551795,20.3292308 32.5580513,20.1949744 32.5580513,20.06 C32.5580513,18.0832821 32.0963077,16.2095385 31.2762051,14.5401026 L37.5790769,13.1497436 C38.4055385,15.2752821 38.8595897,17.5876923 38.8595897,20.0074872 C38.8594872,20.8089231 38.8092308,21.5985641 38.7127179,22.3737436 Z M19.9548718,31.6127179 C13.6008205,31.6127179 8.40205128,26.4139487 8.40205128,20.0598974 C8.40205128,13.7058462 13.5483077,8.50707692 19.9548718,8.50707692 C26.3089231,8.50707692 31.5076923,13.7058462 31.5076923,20.0598974 C31.5076923,26.4139487 26.3089231,31.6127179 19.9548718,31.6127179 Z M22.1510769,1.23015385 L20.9001026,5.25128205 C20.8475897,5.35630769 20.9001026,5.51384615 21.057641,5.56635897 L21.1101538,5.56635897 C21.2151795,5.56635897 21.3202051,5.51384615 21.3727179,5.40882051 L22.6526154,1.29476923 C25.8574359,1.75169231 28.8021538,3.00933333 31.2766154,4.86092308 L29.7222564,6.30153846 C29.6172308,6.4065641 29.6172308,6.56410256 29.7222564,6.66912821 C29.7747692,6.72164103 29.8797949,6.77415385 29.9323077,6.77415385 C29.9848205,6.77415385 30.0373333,6.72164103 30.0898462,6.66912821 L31.6934359,5.18287179 C34.1631795,7.14030769 36.1317949,9.70184615 37.3756923,12.6462564 L31.0212308,14.048 C30.0390769,12.2528205 28.6326154,10.7193846 26.9393846,9.58441026 L27.9893333,8.61220513 C28.094359,8.50717949 28.094359,8.34964103 27.9893333,8.24461538 C27.8843077,8.13958974 27.7267692,8.13958974 27.6217436,8.24461538 L26.4875897,9.29466667 C24.7792821,8.25148718 22.8064615,7.60389744 20.6989744,7.47958974 L20.8475897,6.98420513 C20.9001026,6.87917949 20.8475897,6.72164103 20.6900513,6.66912821 C20.5850256,6.61661538 20.4274872,6.66912821 20.3749744,6.82666667 L20.1850256,7.45979487 C20.1084103,7.45835897 20.0317949,7.45682051 19.9548718,7.45682051 C17.8944615,7.45682051 15.9453333,7.95805128 14.2234872,8.84441026 L12.8057436,2.50892308 C15.0140513,1.60317949 17.4283077,1.10276923 19.9548718,1.10276923 C20.6979487,1.10276923 21.4305641,1.14697436 22.1510769,1.23015385 Z M12.3049231,2.7225641 L13.734359,9.11046154 C11.9413333,10.136 10.4208205,11.5889231 9.31415385,13.3281026 L8.55958974,12.4980513 C8.4545641,12.3930256 8.29702564,12.3930256 8.192,12.4980513 C8.08697436,12.6030769 8.08697436,12.7606154 8.192,12.865641 L9.03292308,13.7906667 C8.03323077,15.5207179 7.43353846,17.5070769 7.36030769,19.6212308 L1.18974359,17.7124103 C2.00564103,10.9927179 6.35641026,5.36584615 12.3049231,2.7225641 Z M2.75579487,27.848 L4.77866667,27.4116923 C4.93620513,27.3591795 5.04123077,27.2541538 4.98871795,27.0966154 C4.93620513,26.9390769 4.83117949,26.8340513 4.67364103,26.8865641 L2.53466667,27.3478974 C1.57866667,25.0881026 1.05025641,22.6068718 1.05025641,20.0073846 C1.05025641,19.4033846 1.07989744,18.806359 1.13548718,18.2169231 L7.35282051,20.1403077 C7.36594872,22.2326154 7.89097436,24.2078974 8.81046154,25.9449231 L6.24902564,26.5190769 C6.09148718,26.5715897 5.98646154,26.6766154 6.03897436,26.8341538 C6.09148718,26.9391795 6.19651282,27.0442051 6.30153846,27.0442051 L6.35405128,27.0442051 L9.0825641,26.4326154 C10.0941538,28.1545641 11.5027692,29.6172308 13.1853333,30.6915897 L8.48841026,35.0271795 C6.03476923,33.1487179 4.05425641,30.6848205 2.75579487,27.848 Z M19.9548718,38.912 C19.290359,38.912 18.6339487,38.8772308 17.9872821,38.8101538 L19.0621538,35.3411282 C19.1146667,35.2361026 19.0621538,35.0785641 18.9046154,35.0260513 C18.7995897,34.9735385 18.6420513,35.0260513 18.5895385,35.1835897 L17.4842051,38.7507692 C14.3234872,38.3368205 11.409641,37.14 8.94092308,35.3636923 L13.6481026,30.9733333 C15.5007179,32.0469744 17.653641,32.6629744 19.9548718,32.6629744 C21.9907692,32.6629744 23.917641,32.1732308 25.6244103,31.3064615 L25.9938462,33.0305641 C26.046359,33.1355897 26.1513846,33.2406154 26.2564103,33.2406154 L26.3089231,33.2406154 C26.4664615,33.1881026 26.5714872,33.0830769 26.5189744,32.9255385 L26.1155897,31.0429744 C27.8349744,30.0718974 29.3073846,28.7094359 30.4084103,27.0779487 L34.7537436,31.7779487 C31.2917949,36.1264615 25.9524103,38.912 19.9548718,38.912 Z" id="Shape" fill-rule="nonzero"></path><path d="M19.9548718,9.55733333 C14.1784615,9.55733333 9.50482051,14.2309744 9.50482051,20.0073846 C9.50482051,25.7837949 14.1784615,30.4574359 19.9548718,30.4574359 C25.7312821,30.4574359 30.4049231,25.7837949 30.4049231,20.0073846 C30.4049231,14.2309744 25.7312821,9.55733333 19.9548718,9.55733333 Z M19.9548718,29.9323077 C14.4935385,29.9323077 10.0299487,25.4687179 10.0299487,20.0073846 C10.0299487,14.5460513 14.4410256,10.0824615 19.9548718,10.0824615 C25.4162051,10.0824615 29.8797949,14.5460513 29.8797949,20.0073846 C29.8797949,25.4687179 25.4162051,29.9323077 19.9548718,29.9323077 Z" id="Shape" fill-rule="nonzero"></path><path d="M19.4822564,33.2931282 C19.3772308,33.2406154 19.2196923,33.2931282 19.1671795,33.4506667 L19.009641,33.9757949 C18.9571282,34.0808205 19.009641,34.238359 19.1671795,34.2908718 L19.2196923,34.2908718 C19.3247179,34.2908718 19.4297436,34.238359 19.4822564,34.1333333 L19.6397949,33.6082051 C19.6923077,33.5031795 19.6397949,33.345641 19.4822564,33.2931282 Z" id="Path"></path><path d="M28.3569231,8.192 C28.4619487,8.192 28.5144615,8.192 28.5144615,8.08697436 L29.0395897,7.61435897 C29.1446154,7.50933333 29.1446154,7.35179487 29.0395897,7.24676923 C28.9345641,7.14174359 28.7770256,7.14174359 28.672,7.24676923 L28.1468718,7.71938462 C28.0418462,7.82441026 28.0418462,7.98194872 28.1468718,8.08697436 C28.1993846,8.13948718 28.3044103,8.192 28.3569231,8.192 Z" id="Path"></path><path d="M5.56635897,9.9774359 C5.61887179,10.0299487 5.72389744,10.0824615 5.77641026,10.0824615 C5.82892308,10.0824615 5.8814359,10.0824615 5.93394872,10.0299487 C6.03897436,9.92492308 6.03897436,9.76738462 5.93394872,9.66235897 L5.61887179,9.29476923 C5.51384615,9.18974359 5.35630769,9.18974359 5.25128205,9.29476923 C5.14625641,9.39979487 5.14625641,9.55733333 5.25128205,9.66235897 L5.56635897,9.9774359 Z" id="Path"></path><path d="M7.14174359,11.710359 C7.19425641,11.7628718 7.29928205,11.8153846 7.35179487,11.8153846 C7.40430769,11.8153846 7.45682051,11.8153846 7.50933333,11.710359 C7.61435897,11.6053333 7.61435897,11.4477949 7.50933333,11.3427692 L6.98420513,10.7651282 C6.87917949,10.6601026 6.72164103,10.6601026 6.61661538,10.7651282 C6.51158974,10.8701538 6.51158974,11.0276923 6.61661538,11.1327179 L7.14174359,11.710359 Z" id="Path"></path><path d="M26.9390769,34.6584615 C26.8865641,34.5009231 26.7815385,34.3958974 26.624,34.4484103 C26.4664615,34.5009231 26.3614359,34.6059487 26.4139487,34.7634872 L26.624,35.8137436 C26.6765128,35.9187692 26.7815385,36.0237949 26.8865641,36.0237949 L26.9390769,36.0237949 C27.0966154,35.9712821 27.201641,35.8662564 27.1491282,35.7087179 L26.9390769,34.6584615 Z" id="Path"></path><path d="M22.528,22.5805128 C22.7380513,22.3704615 22.7380513,22.0553846 22.528,21.8453333 L22.1603077,21.477641 C22.3436923,21.1934359 22.4733333,20.8732308 22.5364103,20.5325128 L23.105641,20.5325128 C23.4207179,20.5325128 23.6307692,20.3224615 23.6307692,20.0073846 C23.6307692,19.6923077 23.4207179,19.4822564 23.105641,19.4822564 L22.5121026,19.4822564 C22.4355897,19.1589744 22.2971282,18.856 22.1101538,18.5872821 L22.528,18.1694359 C22.7380513,17.9593846 22.7380513,17.6443077 22.528,17.4342564 C22.3179487,17.2242051 22.0028718,17.2242051 21.7928205,17.4342564 L21.3646154,17.8624615 C21.0970256,17.6870769 20.7980513,17.558359 20.48,17.4901538 L20.48,16.8566154 C20.48,16.5415385 20.2699487,16.3314872 19.9548718,16.3314872 C19.6397949,16.3314872 19.4297436,16.5415385 19.4297436,16.8566154 L19.4297436,17.4901538 C19.1116923,17.558359 18.8127179,17.6870769 18.5451282,17.8624615 L18.1169231,17.4342564 C17.9068718,17.2242051 17.5917949,17.2242051 17.3817436,17.4342564 C17.1716923,17.6443077 17.1716923,17.9593846 17.3817436,18.1694359 L17.7995897,18.5872821 C17.6126154,18.8558974 17.4742564,19.1588718 17.397641,19.4822564 L16.804,19.4822564 C16.4889231,19.4822564 16.2788718,19.6923077 16.2788718,20.0073846 C16.2788718,20.3224615 16.4889231,20.5325128 16.804,20.5325128 L17.3732308,20.5325128 C17.4363077,20.8732308 17.5659487,21.1934359 17.7493333,21.477641 L17.381641,21.8453333 C17.1715897,22.0553846 17.1715897,22.3704615 17.381641,22.5805128 C17.4866667,22.6855385 17.5916923,22.7380513 17.7492308,22.7380513 C17.8542564,22.7380513 18.0117949,22.6855385 18.1168205,22.5805128 L18.4725128,22.2248205 C18.7553846,22.4198974 19.0789744,22.5612308 19.429641,22.6327179 L19.429641,23.1582564 C19.429641,23.4733333 19.6396923,23.6833846 19.9547692,23.6833846 C20.2698462,23.6833846 20.4798974,23.4733333 20.4798974,23.1582564 L20.4798974,22.6327179 C20.8304615,22.5613333 21.1540513,22.42 21.4370256,22.2248205 L21.7927179,22.5805128 C21.8977436,22.6855385 22.0027692,22.7380513 22.1603077,22.7380513 C22.3179487,22.7380513 22.4754872,22.6855385 22.528,22.5805128 Z M18.3794872,20.0598974 C18.3794872,19.2196923 19.0621538,18.4845128 19.9548718,18.4845128 C20.8475897,18.4845128 21.5302564,19.2196923 21.5302564,20.0598974 C21.5302564,20.9001026 20.7950769,21.6352821 19.9548718,21.6352821 C19.1146667,21.6352821 18.3794872,20.9001026 18.3794872,20.0598974 Z" id="Shape" fill-rule="nonzero"></path><path d="M23.7357949,13.0231795 L23.5782564,13.0231795 C23.5257436,12.9706667 23.4732308,12.9706667 23.4732308,12.9706667 C23.3156923,12.9706667 23.2106667,13.0231795 23.105641,13.1282051 L22.5805128,13.6533333 C22.3704615,13.8633846 22.3704615,14.1784615 22.5805128,14.3885128 L25.5737436,17.3817436 C25.6787692,17.4867692 25.8363077,17.5392821 25.9413333,17.5392821 C26.0988718,17.5392821 26.2038974,17.4867692 26.3089231,17.3817436 L26.8340513,16.8566154 C26.9390769,16.7515897 26.9915897,16.5940513 26.9915897,16.4365128 L26.9915897,16.2789744 C26.7815385,14.5460513 25.4687179,13.2332308 23.7357949,13.0231795 Z M26.4139487,16.4365128 L25.8888205,16.961641 L22.8955897,13.9684103 L23.4732308,13.4957949 L23.6307692,13.4957949 C25.1011282,13.6533333 26.2564103,14.8086154 26.4139487,16.2789744 L26.4139487,16.4365128 Z" id="Shape" fill-rule="nonzero"></path><path d="M14.336,22.5805128 C14.2834872,22.528 14.1259487,22.4754872 14.0209231,22.4754872 C13.8633846,22.4754872 13.758359,22.528 13.6533333,22.6330256 L13.1282051,23.1581538 C13.0231795,23.2631795 12.9706667,23.4207179 12.9706667,23.5782564 L12.9706667,23.7357949 C13.1807179,25.4687179 14.4935385,26.7815385 16.2264615,26.9915897 L16.384,26.9915897 L16.4365128,26.9915897 C16.5940513,26.9915897 16.6990769,26.9390769 16.8041026,26.8340513 L17.3292308,26.3089231 C17.5392821,26.0988718 17.5392821,25.7837949 17.3292308,25.5737436 L14.336,22.5805128 Z M16.4890256,26.5189744 L16.3314872,26.5189744 C14.8611282,26.3614359 13.7058462,25.2061538 13.5483077,23.7357949 L13.5483077,23.5782564 L14.0209231,23.0006154 L17.0141538,25.9938462 L16.4890256,26.5189744 Z" id="Shape" fill-rule="nonzero"></path><path d="M13.6533333,17.3292308 C13.758359,17.4342564 13.9158974,17.4867692 14.0209231,17.4867692 C14.1784615,17.4867692 14.2834872,17.4342564 14.3885128,17.3292308 L17.3817436,14.336 C17.5917949,14.1259487 17.5917949,13.8108718 17.3817436,13.6008205 L16.8566154,13.0756923 C16.6990769,13.0231795 16.5940513,12.9706667 16.4365128,12.9706667 L16.384,12.9706667 L16.2264615,12.9706667 C14.4935385,13.1807179 13.1807179,14.4935385 12.9706667,16.2264615 L12.9706667,16.384 C12.9706667,16.5415385 13.0231795,16.6990769 13.1282051,16.8041026 L13.6533333,17.3292308 Z M13.4432821,16.3314872 C13.6008205,14.8611282 14.7561026,13.7058462 16.2264615,13.5483077 L16.4365128,13.4957949 L16.961641,14.0209231 L13.9684103,17.0141538 L13.4432821,16.4890256 L13.4432821,16.3314872 Z" id="Shape" fill-rule="nonzero"></path><path d="M26.2038974,22.6855385 C26.1513846,22.528 26.046359,22.4754872 25.8888205,22.4754872 C25.7312821,22.4754872 25.6262564,22.528 25.5212308,22.6330256 L22.528,25.6262564 C22.3179487,25.8363077 22.3179487,26.1513846 22.528,26.3614359 L23.0531282,26.8865641 C23.1581538,26.9915897 23.2631795,27.0441026 23.4207179,27.0441026 L23.4732308,27.0441026 L23.6307692,27.0441026 C25.3636923,26.8340513 26.6765128,25.5212308 26.8865641,23.7883077 L26.8865641,23.6307692 C26.8865641,23.4732308 26.8340513,23.3156923 26.7290256,23.2106667 L26.2038974,22.6855385 Z M26.4139487,23.6832821 C26.2564103,25.153641 25.1011282,26.3089231 23.6307692,26.4664615 L23.4732308,26.4664615 L22.9481026,25.9413333 L25.8888205,23.0006154 L26.4139487,23.5257436 L26.4139487,23.6832821 Z" id="Shape" fill-rule="nonzero"></path><path d="M17.3292308,4.98871795 C17.6968205,4.98871795 18.0118974,4.67364103 18.0118974,4.30605128 C18.0118974,3.93846154 17.6968205,3.62338462 17.3292308,3.62338462 C16.961641,3.62338462 16.6465641,3.93846154 16.6465641,4.30605128 C16.6465641,4.67364103 16.961641,4.98871795 17.3292308,4.98871795 Z" id="Path"></path><path d="M22.5805128,35.1310769 C22.2129231,35.1310769 21.8978462,35.4461538 21.8978462,35.8137436 C21.8978462,36.1813333 22.2129231,36.4964103 22.5805128,36.4964103 C22.9481026,36.4964103 23.2631795,36.1813333 23.2631795,35.8137436 C23.2631795,35.4461538 22.9481026,35.1310769 22.5805128,35.1310769 Z" id="Path"></path><path d="M25.2061538,5.67138462 C25.3111795,5.72389744 25.4687179,5.77641026 25.5737436,5.77641026 C25.7837949,5.77641026 26.046359,5.67138462 26.1513846,5.40882051 C26.3089231,5.09374359 26.2038974,4.67364103 25.8888205,4.46358974 C25.5737436,4.30605128 25.153641,4.41107692 24.9435897,4.72615385 C24.8910769,4.88369231 24.8385641,5.09374359 24.8910769,5.25128205 C24.9435897,5.40882051 25.0486154,5.56635897 25.2061538,5.67138462 Z" id="Path"></path><path d="M14.6510769,34.3958974 C14.336,34.238359 13.9158974,34.3433846 13.7058462,34.6584615 C13.5483077,34.9735385 13.6533333,35.393641 13.9684103,35.6036923 C14.0734359,35.6562051 14.2309744,35.7087179 14.336,35.7087179 C14.5985641,35.7087179 14.8086154,35.5511795 14.913641,35.3411282 C14.9661538,35.1835897 15.0186667,34.9735385 14.9661538,34.816 C14.913641,34.6584615 14.8086154,34.5009231 14.6510769,34.3958974 Z" id="Path"></path><path d="M32.2953846,10.6075897 C32.4004103,10.6075897 32.5054359,10.5550769 32.6629744,10.5025641 C32.8205128,10.3975385 32.9255385,10.24 32.9780513,10.0824615 C33.0305641,9.92492308 33.0305641,9.71487179 32.9255385,9.55733333 C32.768,9.24225641 32.2953846,9.08471795 31.9803077,9.29476923 C31.8227692,9.39979487 31.7177436,9.55733333 31.6652308,9.71487179 C31.6127179,9.87241026 31.6127179,10.0824615 31.7177436,10.24 C31.8227692,10.4500513 32.0328205,10.6075897 32.2953846,10.6075897 Z" id="Path"></path><path d="M8.24451282,29.8272821 C8.08697436,29.5122051 7.61435897,29.3546667 7.29928205,29.5647179 C6.98420513,29.7747692 6.82666667,30.1948718 7.03671795,30.5099487 C7.14174359,30.72 7.35179487,30.8775385 7.61435897,30.8775385 C7.77189744,30.8775385 7.87692308,30.8775385 7.98194872,30.7725128 C8.13948718,30.6674872 8.24451282,30.5099487 8.29702564,30.3524103 C8.34953846,30.1948718 8.34953846,29.9848205 8.24451282,29.8272821 Z" id="Path"></path><path d="M35.7087179,16.7515897 C35.3411282,16.7515897 35.0260513,17.0666667 35.0260513,17.4342564 C35.0260513,17.8018462 35.3411282,18.1169231 35.7087179,18.1169231 C36.0763077,18.1169231 36.3913846,17.8018462 36.3913846,17.4342564 C36.3913846,17.0666667 36.0763077,16.7515897 35.7087179,16.7515897 Z" id="Path"></path><path d="M4.20102564,22.0028718 C3.8334359,22.0028718 3.51835897,22.3179487 3.51835897,22.6855385 C3.51835897,23.0531282 3.8334359,23.3682051 4.20102564,23.3682051 C4.56861538,23.3682051 4.88369231,23.0531282 4.88369231,22.6855385 C4.88369231,22.3179487 4.56861538,22.0028718 4.20102564,22.0028718 Z" id="Path"></path><path d="M34.2908718,25.3111795 C34.238359,25.4687179 34.1858462,25.6787692 34.238359,25.8363077 C34.2908718,25.9938462 34.3958974,26.1513846 34.5534359,26.2564103 C34.6584615,26.3089231 34.816,26.3614359 34.9210256,26.3614359 C35.1835897,26.3614359 35.393641,26.2038974 35.4986667,25.9938462 C35.5511795,25.8363077 35.6036923,25.6262564 35.5511795,25.4687179 C35.4986667,25.3111795 35.393641,25.153641 35.2361026,25.0486154 C34.9210256,24.8910769 34.4484103,24.9961026 34.2908718,25.3111795 Z" id="Path"></path><path d="M4.30605128,14.5985641 C4.3585641,14.7561026 4.46358974,14.913641 4.62112821,15.0186667 C4.72615385,15.0711795 4.88369231,15.1236923 4.98871795,15.1236923 C5.25128205,15.1236923 5.46133333,15.0186667 5.56635897,14.7561026 C5.61887179,14.5985641 5.67138462,14.3885128 5.61887179,14.2309744 C5.56635897,14.0734359 5.46133333,13.9158974 5.30379487,13.8108718 C4.98871795,13.6533333 4.56861538,13.758359 4.3585641,14.0734359 C4.30605128,14.2309744 4.25353846,14.4410256 4.30605128,14.5985641 Z" id="Path"></path><path d="M29.7747692,31.7702564 C29.4596923,31.9803077 29.3021538,32.4004103 29.5122051,32.7154872 C29.6172308,32.9255385 29.8272821,33.0830769 30.0898462,33.0830769 C30.2473846,33.0830769 30.3524103,33.0305641 30.4574359,32.9780513 C30.6149744,32.8730256 30.72,32.7154872 30.7725128,32.5579487 C30.8250256,32.4004103 30.8250256,32.190359 30.72,32.0328205 C30.5624615,31.7177436 30.0898462,31.5602051 29.7747692,31.7702564 Z" id="Path"></path><path d="M9.81989744,8.40205128 C9.92492308,8.40205128 10.0299487,8.40205128 10.1874872,8.29702564 C10.5025641,8.08697436 10.6601026,7.66687179 10.4500513,7.35179487 C10.2925128,7.03671795 9.81989744,6.87917949 9.50482051,7.08923077 C9.34728205,7.19425641 9.24225641,7.35179487 9.18974359,7.50933333 C9.13723077,7.66687179 9.13723077,7.87692308 9.24225641,8.03446154 C9.34728205,8.24451282 9.55733333,8.40205128 9.81989744,8.40205128 Z" id="Path"></path></g></g></g></svg>')
        var ecClutchStatus = $('<div class="ec-20">-</div>')

        var ecLight = $('<div class="ec-big-button"></div>')
        var ecLightButton = $('<div class="ec-big-button"></div>')
        var ecLightButtonMid = $('<div class="ec-big-button-2"></div>')
        var ecLightButtonInner = $('<div class="ec-big-button-inner"></div>')
        var ecLightButtonInnerBg = $('<div class="ec-big-button-inner-bg"></div>')
        var ecLightTitle = $('<div class="ec-24">LIGHTS</div>')
        var ecLightSvg = $('<svg class="ec-svg" width="27px" height="40px" viewBox="0 0 27 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-151.000000, -160.000000)" fill="#000000"><g id="light" transform="translate(151.000000, 160.000000)"><path d="M13.4617783,0.762124711 C6.3948037,0.762124711 0.62113164,6.53579677 0.62113164,13.6027714 C0.62113164,17.2979215 2.23775982,20.8545035 4.96293303,23.256351 C6.99526559,25.2886836 6.81050808,29.630485 6.76431871,29.6766744 C6.76431871,29.9076212 6.81050808,30.0923788 6.99526559,30.2771363 C7.13383372,30.4157044 7.3647806,30.5080831 7.54953811,30.5080831 L19.3278291,30.5080831 C19.558776,30.5080831 19.7435335,30.4157044 19.8821016,30.2771363 C20.0206697,30.1385681 20.1130485,29.9076212 20.1130485,29.6766744 C20.1130485,29.630485 19.8821016,25.2886836 21.9144342,23.256351 C21.9606236,23.2101617 22.0068129,23.1639723 22.0530023,23.1177829 C24.7319861,20.669746 26.3024249,17.2055427 26.3024249,13.6027714 C26.3024249,6.53579677 20.5287529,0.762124711 13.4617783,0.762124711 Z M20.8520785,22.0554273 C20.8058891,22.1016166 20.7135104,22.1939954 20.7135104,22.2401848 C18.9121247,24.1801386 18.5887991,27.3672055 18.5426097,28.891455 L8.33475751,28.891455 C8.28856813,27.3672055 7.96524249,24.0415704 6.02528868,22.0554273 C3.57725173,19.9307159 2.14538106,16.8360277 2.14538106,13.556582 C2.14538106,7.32101617 7.18002309,2.28637413 13.4155889,2.28637413 C19.6511547,2.28637413 24.6857968,7.32101617 24.6857968,13.556582 C24.6857968,16.8360277 23.3001155,19.9307159 20.8520785,22.0554273 Z" id="Shape" fill-rule="nonzero"></path><path d="M13.4155889,4.04157044 C12.9998845,4.04157044 12.6303695,4.41108545 12.6303695,4.82678984 C12.6303695,5.24249423 12.9998845,5.61200924 13.4155889,5.61200924 C18.0807159,5.61200924 21.8220554,9.39953811 21.8220554,14.0184758 C21.8220554,14.4341801 22.1915704,14.8036952 22.6072748,14.8036952 C23.0229792,14.8036952 23.3924942,14.4341801 23.3924942,14.0184758 C23.4386836,8.52193995 18.9583141,4.04157044 13.4155889,4.04157044 Z" id="Path"></path><path d="M18.5426097,31.3856813 L8.28856813,31.3856813 C7.22621247,31.3856813 6.34861432,32.2632794 6.34861432,33.3256351 C6.34861432,34.3879908 7.22621247,35.2655889 8.28856813,35.2655889 L18.4964203,35.2655889 C19.6049654,35.2193995 20.4825635,34.3879908 20.4825635,33.3256351 C20.4825635,32.2632794 19.6049654,31.3856813 18.5426097,31.3856813 Z M18.5426097,33.6489607 L8.28856813,33.6489607 C8.10381062,33.6489607 7.91905312,33.5103926 7.91905312,33.2794457 C7.91905312,33.0484988 8.05762125,32.9099307 8.28856813,32.9099307 L18.4964203,32.9099307 C18.6811778,32.9099307 18.8659353,33.0484988 18.8659353,33.2794457 C18.8659353,33.5103926 18.7273672,33.6489607 18.5426097,33.6489607 Z" id="Shape" fill-rule="nonzero"></path><path d="M17.0183603,36.0508083 L9.81281755,36.0508083 C8.75046189,36.0508083 7.87286374,36.9284065 7.87286374,37.9907621 C7.87286374,39.0531178 8.75046189,39.9307159 9.81281755,39.9307159 L17.0183603,39.9307159 C18.0807159,39.9307159 18.9583141,39.0531178 18.9583141,37.9907621 C18.9583141,36.8822171 18.0807159,36.0508083 17.0183603,36.0508083 Z M17.0183603,38.3140878 L9.81281755,38.3140878 C9.62806005,38.3140878 9.44330254,38.1755196 9.44330254,37.9445727 C9.44330254,37.7136259 9.58187067,37.5750577 9.81281755,37.5750577 L17.0183603,37.5750577 C17.2031178,37.5750577 17.3878753,37.7136259 17.3878753,37.9445727 C17.3878753,38.1755196 17.2031178,38.3140878 17.0183603,38.3140878 Z" id="Shape" fill-rule="nonzero"></path></g></g></g></svg>')
        var ecLightStatus = $('<div class="ec-20">-</div>')

        var ecPlusPlus = $('<svg width="56px" height="43px" viewBox="0 0 56 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="99.6116329%" gradientTransform="translate(0.500000,0.000000),scale(0.535714,1.000000),rotate(90.000000),translate(-0.500000,-0.000000)" id="radialGradient-1"><stop stop-color="#8F8F8F" offset="0%"></stop><stop stop-color="#6B6B6B" offset="100%"></stop></radialGradient></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-232.000000, -1.000000)"><g id="++" transform="translate(232.000000, 3.000000)"><path d="M28.7451866,-0.456229092 L54.508356,28.3331439 C54.8766504,28.7446991 54.8415807,29.3768921 54.4300255,29.7451866 C54.2466612,29.9092765 54.0092345,30 53.7631695,30 L2.23683054,30 C1.68454579,30 1.23683054,29.5522847 1.23683054,29 C1.23683054,28.753935 1.32755402,28.5165083 1.49164398,28.3331439 L27.2548134,-0.456229092 C27.6231079,-0.867784264 28.2553009,-0.902854027 28.6668561,-0.5345596 C28.6943935,-0.509916789 28.7205437,-0.483766507 28.7451866,-0.456229092 Z" id="Triangle-Copy-12" stroke="#42424E" fill="url(#radialGradient-1)"></path><path d="M28.7451866,9.54377091 L54.508356,38.3331439 C54.8766504,38.7446991 54.8415807,39.3768921 54.4300255,39.7451866 C54.2466612,39.9092765 54.0092345,40 53.7631695,40 L2.23683054,40 C1.68454579,40 1.23683054,39.5522847 1.23683054,39 C1.23683054,38.753935 1.32755402,38.5165083 1.49164398,38.3331439 L27.2548134,9.54377091 C27.6231079,9.13221574 28.2553009,9.09714597 28.6668561,9.4654404 C28.6943935,9.49008321 28.7205437,9.51623349 28.7451866,9.54377091 Z" id="Triangle-Copy-12" stroke="#42424E" fill="url(#radialGradient-1)"></path><text id="100"  font-family="SourceSansPro-Black, Source Sans Pro" font-size="14" font-weight="700" fill="#FFFFFF"><tspan class="ec-plus-plus" text-anchor="middle" x="28" y="37">-</tspan></text></g></g></g></svg>')

        var ecPlus = $('<svg width="56px" height="33px" viewBox="0 0 56 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="99.6116329%" gradientTransform="translate(0.500000,0.000000),scale(0.535714,1.000000),rotate(90.000000),translate(-0.500000,-0.000000)" id="radialGradient-1"><stop stop-color="#8F8F8F" offset="0%"></stop><stop stop-color="#6B6B6B" offset="100%"></stop></radialGradient></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-232.000000, -61.000000)"><g id="+" transform="translate(232.000000, 63.000000)"><path d="M28.7451866,-0.456229092 L54.508356,28.3331439 C54.8766504,28.7446991 54.8415807,29.3768921 54.4300255,29.7451866 C54.2466612,29.9092765 54.0092345,30 53.7631695,30 L2.23683054,30 C1.68454579,30 1.23683054,29.5522847 1.23683054,29 C1.23683054,28.753935 1.32755402,28.5165083 1.49164398,28.3331439 L27.2548134,-0.456229092 C27.6231079,-0.867784264 28.2553009,-0.902854027 28.6668561,-0.5345596 C28.6943935,-0.509916789 28.7205437,-0.483766507 28.7451866,-0.456229092 Z" id="Triangle-Copy-12" stroke="#42424E" fill="url(#radialGradient-1)"></path><text id="10"  font-family="SourceSansPro-Black, Source Sans Pro" font-size="14" font-weight="700" fill="#FFFFFF"><tspan class="ec-plus" text-anchor="middle" x="28" y="27">-</tspan></text></g></g></g></svg>')

        var ecNumber = $('<div class="ec-number">-</div>')

        var ecMinus = $('<svg width="56px" height="33px" viewBox="0 0 56 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="99.6116329%" gradientTransform="translate(0.500000,0.000000),scale(0.535714,1.000000),rotate(90.000000),translate(-0.500000,-0.000000)" id="radialGradient-1"><stop stop-color="#8F8F8F" offset="0%"></stop><stop stop-color="#6B6B6B" offset="100%"></stop></radialGradient></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-232.000000, -145.000000)"><g id="-" transform="translate(232.000000, 144.000000)"><path d="M28.7451866,1.54377091 L54.508356,30.3331439 C54.8766504,30.7446991 54.8415807,31.3768921 54.4300255,31.7451866 C54.2466612,31.9092765 54.0092345,32 53.7631695,32 L2.23683054,32 C1.68454579,32 1.23683054,31.5522847 1.23683054,31 C1.23683054,30.753935 1.32755402,30.5165083 1.49164398,30.3331439 L27.2548134,1.54377091 C27.6231079,1.13221574 28.2553009,1.09714597 28.6668561,1.4654404 C28.6943935,1.49008321 28.7205437,1.51623349 28.7451866,1.54377091 Z" id="Triangle-Copy-13" stroke="#42424E" fill="url(#radialGradient-1)" transform="translate(28.000000, 17.000000) scale(1, -1) translate(-28.000000, -17.000000) "></path><text id="10"  font-family="SourceSansPro-Black, Source Sans Pro" font-size="14" font-weight="700" fill="#FFFFFF"><tspan class="ec-minus" text-anchor="middle" x="28" y="14">-</tspan></text></g></g></g></svg>')

        var ecMinusMinus = $('<svg width="56px" height="43px" viewBox="0 0 56 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="99.6116329%" gradientTransform="translate(0.500000,0.000000),scale(0.535714,1.000000),rotate(90.000000),translate(-0.500000,-0.000000)" id="radialGradient-1"><stop stop-color="#8F8F8F" offset="0%"></stop><stop stop-color="#6B6B6B" offset="100%"></stop></radialGradient></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-232.000000, -194.000000)"><g id="--" transform="translate(232.000000, 193.000000)"><path d="M28.7451866,11.5437709 L54.508356,40.3331439 C54.8766504,40.7446991 54.8415807,41.3768921 54.4300255,41.7451866 C54.2466612,41.9092765 54.0092345,42 53.7631695,42 L2.23683054,42 C1.68454579,42 1.23683054,41.5522847 1.23683054,41 C1.23683054,40.753935 1.32755402,40.5165083 1.49164398,40.3331439 L27.2548134,11.5437709 C27.6231079,11.1322157 28.2553009,11.097146 28.6668561,11.4654404 C28.6943935,11.4900832 28.7205437,11.5162335 28.7451866,11.5437709 Z" id="Triangle-Copy-14" stroke="#42424E" fill="url(#radialGradient-1)" transform="translate(28.000000, 27.000000) scale(1, -1) translate(-28.000000, -27.000000) "></path><path d="M28.7451866,1.54377091 L54.508356,30.3331439 C54.8766504,30.7446991 54.8415807,31.3768921 54.4300255,31.7451866 C54.2466612,31.9092765 54.0092345,32 53.7631695,32 L2.23683054,32 C1.68454579,32 1.23683054,31.5522847 1.23683054,31 C1.23683054,30.753935 1.32755402,30.5165083 1.49164398,30.3331439 L27.2548134,1.54377091 C27.6231079,1.13221574 28.2553009,1.09714597 28.6668561,1.4654404 C28.6943935,1.49008321 28.7205437,1.51623349 28.7451866,1.54377091 Z" id="Triangle-Copy-15" stroke="#42424E" fill="url(#radialGradient-1)" transform="translate(28.000000, 17.000000) scale(1, -1) translate(-28.000000, -17.000000) "></path><text id="100-copy"  font-family="SourceSansPro-Black, Source Sans Pro" font-size="14" font-weight="700" fill="#FFFFFF"><tspan class="ec-minus-minus" text-anchor="middle" x="28" y="14">-</tspan></text></g></g></g></svg>')

        var ecEngineState
        var ecIdleState
        var ecClutchState
        var ecLightState

        this.onEngineClicked = function (e) {
            e.preventDefault()
            let payloadSend
            if (ecEngineState === 1) {//Stopped
                payloadSend = '{"button_1":1, "button_2":0}'
            }else if (ecEngineState === 3) {//Running
                payloadSend = '{"button_1":0, "button_2":1}'
            } else if (ecEngineState === 4) {//Countdown
                payloadSend = '{"button_1":0, "button_2":1}'
            } else {
                payloadSend = ''
            }
            let plSend = JSON.stringify(payloadSend)
            this.sendValue(settings.ec_engine_send, plSend)
        }

        this.onIdleClicked = function (e) {
            e.preventDefault()
            let payloadSend
            if (ecIdleState === 0) {//Running
                console.log('running payloadsend 1:0')
                payloadSend = '{"button_1":1, "button_2":0}'
            } else if (ecIdleState > 0) {//Idling
                console.log('idling payloadsend 0:1')
                payloadSend = '{"button_1":0, "button_2":1}'
            } else {
                console.log('ecIdleState is not 0 or > 0')
                payloadSend = ''
            }
            let plSend = JSON.stringify(payloadSend)
            this.sendValue(settings.ec_idle_send, plSend)
        }

        this.onClutchClicked = function (e) {
            e.preventDefault()
            let payloadSend
            if (ecClutchState === 1) {//Running
                payloadSend = '{"button_1":0, "button_2":1}'
            } else if (ecClutchState === 0) {//Stopped
                payloadSend = '{"button_1":1, "button_2":0}'
            } else {
                payloadSend = ''
            }
            let plSend = JSON.stringify(payloadSend)
            this.sendValue(settings.ec_clutch_send, plSend)
        }

        this.onLightClicked = function (e) {
            e.preventDefault()
            let payloadSend
            if (ecLightState === 1) {//Running
                payloadSend = '{"button_1":0, "button_2":1}'
            } else if (ecLightState === 0) {//Stopped
                payloadSend = '{"button_1":1, "button_2":0}'
            } else {
                payloadSend = ''
            }
            let plSend = JSON.stringify(payloadSend)
            this.sendValue(settings.ec_light_send, plSend)
        }

        this.onPlusClicked = function (e) {
            e.preventDefault();
            let payloadSend = '{"button_1":0, "button_2":1}';
            let plSend = JSON.stringify(payloadSend);
            this.sendValue(settings.ec_speed_control_minor, plSend);
        }

        this.onMinusClicked = function (e) {
            e.preventDefault();
            let payloadSend = '{"button_1":1, "button_2":0}';
            let plSend = JSON.stringify(payloadSend);
            this.sendValue(settings.ec_speed_control_minor, plSend);
        }

        this.onPlusPlusClicked = function (e) {
            e.preventDefault();
            let payloadSend = '{"button_1":0, "button_2":1}';
            let plSend = JSON.stringify(payloadSend);
            this.sendValue(settings.ec_speed_control, plSend);
        }

        this.onMinusMinusClicked = function (e) {
            e.preventDefault();
            let payloadSend = '{"button_1":1, "button_2":0}';
            let plSend = JSON.stringify(payloadSend);
            this.sendValue(settings.ec_speed_control, plSend);
        }

        self.render = function (containerElement) {

            $(containerElement).empty()

            $(ecEngineButtonInner).click(this.onEngineClicked.bind(this))
            $(ecIdleButtonInner).click(this.onIdleClicked.bind(this))
            $(ecClutchButtonInner).click(this.onClutchClicked.bind(this))
            $(ecLightButtonInner).click(this.onLightClicked.bind(this))

            $(ecPlus).click(this.onPlusClicked.bind(this))
            $(ecMinus).click(this.onMinusClicked.bind(this))
            $(ecPlusPlus).click(this.onPlusPlusClicked.bind(this))
            $(ecMinusMinus).click(this.onMinusMinusClicked.bind(this))

            $(ecEngine).append(
                ecEngineButton.append(
                    ecEngineButtonMid.append(
                        ecEngineButtonInnerBg.append(
                            ecEngineButtonInner.append(
                                ecEngineTitle
                            ).append(
                                ecEngineSvg
                            ).append(
                                ecEngineStatus
                            )
                        )
                    )
                )
            )

            $(ecIdle).append(
                ecIdleButton.append(
                    ecIdleButtonMid.append(
                        ecIdleButtonInnerBg.append(
                            ecIdleButtonInner.append(
                                ecIdleTitle
                            ).append(
                                ecIdleSvg
                            ).append(
                                ecIdleStatus
                            )
                        )
                    )
                )
            )

            $(ecClutch).append(
                ecClutchButton.append(
                    ecClutchButtonMid.append(
                        ecClutchButtonInnerBg.append(
                            ecClutchButtonInner.append(
                                ecClutchTitle
                            ).append(
                                ecClutchSvg
                            ).append(
                                ecClutchStatus
                            )
                        )
                    )
                )
            )

            $(ecLight).append(
                ecLightButton.append(
                    ecLightButtonMid.append(
                        ecLightButtonInnerBg.append(
                            ecLightButtonInner.append(
                                ecLightTitle
                            ).append(
                                ecLightSvg
                            ).append(
                                ecLightStatus
                            )
                        )
                    )
                )
            )

            $(ecButtons).append(ecEngine).append(ecIdle).append(ecClutch).append(ecLight)

            $(ecArrows).append(ecPlusPlus).append(ecPlus).append(ecNumber).append(ecMinus).append(ecMinusMinus)

            $(ecContainer).append(ecButtons).append(ecArrows)

            $(containerElement).append(ecContainer)

        }

        self.onSettingsChanged = function (newSettings) {

            currentSettings = newSettings

        }

        self.onCalculatedValueChanged = function (settingName, newValue) {

            if (settingName == "ec_engine_status") {
                if (newValue === 1) {
                    $(ecEngineStatus).html('STOPPED')
                    $(ecEngineStatus).css({ "font-size": "20px" })
                    $(ecEngineButtonInnerBg).css({ "background": '#b4c7e7' })
                }
                if (newValue === 2) {
                    $(ecEngineStatus).html('STARTING')
                    $(ecEngineStatus).css({ "font-size": "20px" })
                    $(ecEngineButtonInnerBg).css({ "background": '#c5e0b4' })
                }
                if (newValue === 3) {
                    $(ecEngineStatus).html('RUNNING')
                    $(ecEngineStatus).css({ "font-size": "20px" })
                    $(ecEngineButtonInnerBg).css({ "background": '#c5e0b4' })
                }
                if (newValue === 4) {
                    $(ecEngineStatus).html('COUNTDOWN')
                    $(ecEngineStatus).css({ "font-size": "15px" })
                    $(ecEngineButtonInnerBg).css({ "background": '#FFA100'})
                }
                if (newValue === 5) {
                    $(ecEngineStatus).html('SHUTDOWN')
                    $(ecEngineStatus).css({ "font-size": "16px" })
                    $(ecEngineButtonInnerBg).css({ "background": '#b4c7e7' })
                }
                if (newValue === -1) {
                    $(ecEngineStatus).html('DC')
                    $(ecEngineStatus).css({ "font-size": "20px" })
                    $(ecEngineButtonInnerBg).css({ "background": 'grey' })
                }
                ecEngineState = newValue
            }

            if (settingName == "ec_idle_status") { //stored_value
                if (newValue > 0) { // idling
                    console.log('newValue > 0 idling')
                    $(ecIdleStatus).html(newValue + ' RPM')
                    $(ecIdleSvg).html(ecIdleSvgResume)
                    $(ecIdleTitle).html('RESUME') // change title to idle ecIdleTitle
                    $(ecIdleButtonInnerBg).css({ "background": '#b4c7e7' })
                }
                if (newValue === 0) { // running
                    console.log('newValue 0 running')
                    $(ecIdleStatus).html('--- RPM')
                    $(ecIdleSvg).html(ecIdleSvgIdle)
                    $(ecIdleTitle).html('IDLE') // change title to idle ecIdleTitle
                    $(ecIdleButtonInnerBg).css({ "background": '#c5e0b4' })
                }
                if (newValue === -1) { // disconnected
                    console.log('newValue -1 d/c')
                    $(ecIdleStatus).html('DC')
                    $(ecIdleSvg).html(ecIdleSvgIdle)
                    $(ecIdleButtonInnerBg).css({ "background": 'grey' })
                }
                ecIdleState = newValue
                console.log(ecIdleState)
            }

            if (settingName == "ec_clutch_status") {
                if (newValue === 0) {
                    $(ecClutchStatus).html('DISENGAGED')
                    $(ecClutchStatus).css({ "font-size": "16px" })
                    $(ecClutchButtonInnerBg).css({ "background": '#b4c7e7', 'font-size': '10px' })  
                }
                if (newValue === 1) {
                    $(ecClutchStatus).html('ENGAGED')
                    $(ecClutchStatus).css({ "font-size": "20px" })
                    $(ecClutchButtonInnerBg).css({ "background": '#c5e0b4' })
                }
                if (newValue === -1) {
                    $(ecClutchStatus).html('DC')
                    $(ecClutchStatus).css({ "font-size": "20px" })
                    $(ecClutchButtonInnerBg).css({ "background": 'grey' })
                }
                ecClutchState = newValue
            }

            if (settingName == "ec_light_status") {
                if (newValue === 0) {
                    $(ecLightStatus).html('OFF')
                    $(ecLightButtonInnerBg).css({ "background": '#b4c7e7' })
                }
                if (newValue === 1) {
                    $(ecLightStatus).html('ON')
                    $(ecLightButtonInnerBg).css({ "background": '#c5e0b4' })
                }
                if (newValue === -1) {
                    $(ecLightStatus).html('DC')
                    $(ecLightButtonInnerBg).css({ "background": 'grey' })
                }
                ecLightState = newValue
            }

            if (settingName == "ec_goal_throttle") {
                //console.log(newValue)
                if (newValue >= 0) {
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-number')[0].innerHTML = newValue
                } else {
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-number')[0].innerHTML = "DC"
                }
            }

            if (settingName == "ec_bump_rate_small") {
                if (newValue > 0) {
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-plus')[0].innerHTML = newValue
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-minus')[0].innerHTML = newValue
                } else {
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-plus')[0].innerHTML = "-"
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-minus')[0].innerHTML = "-"
                }
            }

            if (settingName == "ec_bump_rate_large") {
                if (newValue > 0) {
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-plus-plus')[0].innerHTML = newValue
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-minus-minus')[0].innerHTML = newValue
                } else {
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-plus-plus')[0].innerHTML = "-"
                    document.getElementById(thisWidgetId).getElementsByClassName('ec-minus-minus')[0].innerHTML = "-"
                }
            }

        }

        self.onDispose = function () {

        }

        this.getHeight = function () {
            return 4
        }

        self.onSettingsChanged(settings)

    }

}())